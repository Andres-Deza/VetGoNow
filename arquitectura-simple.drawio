<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/139.0.0.0 Safari/537.36" version="28.1.2">
  <diagram id="VetGestion-Architecture-Cloud" name="VetGestion Architecture">
    <mxGraphModel dx="2006" dy="861" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1800" pageHeight="1200" background="#ffffff" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="title" value="VetGestiÃ³n - Arquitectura del Sistema" style="text;html=1;strokeColor=#1976D2;fillColor=#E3F2FD;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=28;fontStyle=1;fontColor=#0D47A1;" parent="1" vertex="1">
          <mxGeometry x="420" y="30" width="800" height="60" as="geometry" />
        </mxCell>
        <mxCell id="trust-boundary-users" value="Zona externa (Internet)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#F44336;fillColor=none;fontSize=12;fontStyle=1;fontColor=#D32F2F;dashed=1;dashPattern=8 8;strokeWidth=1;verticalAlign=top;align=center;opacity=40;" parent="1" vertex="1">
          <mxGeometry x="20" y="100" width="380" height="220" as="geometry" />
        </mxCell>
        <mxCell id="trust-boundary-platform" value="VETGESTIÃ“N (CONTROLADO)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#4CAF50;fillColor=none;fontSize=12;fontStyle=1;fontColor=#2E7D32;dashed=1;dashPattern=8 8;strokeWidth=1;verticalAlign=top;align=center;opacity=40;" parent="1" vertex="1">
          <mxGeometry x="460" y="100" width="720" height="790" as="geometry" />
        </mxCell>
        <mxCell id="trust-boundary-external" value="TERCEROS" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF9800;fillColor=none;fontSize=12;fontStyle=1;fontColor=#F57C00;dashed=1;dashPattern=8 8;strokeWidth=1;verticalAlign=top;align=center;opacity=40;" parent="1" vertex="1">
          <mxGeometry x="1210" y="100" width="450" height="480" as="geometry" />
        </mxCell>
        <mxCell id="users-layer" value="USUARIOS" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#4CAF50;fillColor=#E8F5E8;fontSize=16;fontStyle=1;verticalAlign=top;align=center;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="40" y="140" width="340" height="160" as="geometry" />
        </mxCell>
        <mxCell id="user-client" value="&amp;nbsp;Clientes" style="shape=actor;whiteSpace=wrap;html=1;strokeColor=#4CAF50;fillColor=#C8E6C9;" parent="1" vertex="1">
          <mxGeometry x="70" y="180" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="user-vet" value="&amp;nbsp;Veterinarios" style="shape=actor;whiteSpace=wrap;html=1;strokeColor=#2196F3;fillColor=#BBDEFB;" parent="1" vertex="1">
          <mxGeometry x="170" y="180" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="user-admin" value="&amp;nbsp;Administradores" style="shape=actor;whiteSpace=wrap;html=1;strokeColor=#FF9800;fillColor=#FFE0B2;" parent="1" vertex="1">
          <mxGeometry x="290" y="180" width="60" height="80" as="geometry" />
        </mxCell>
        <mxCell id="frontend-layer" value="PRESENTACIÃ“N" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#2196F3;fillColor=#E3F2FD;fontSize=16;fontStyle=1;verticalAlign=top;align=center;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="480" y="140" width="680" height="180" as="geometry" />
        </mxCell>
        <mxCell id="web-app" value="&amp;nbsp;WEB APP&lt;br&gt;React + TypeScript Â· PWA Â· Responsivo" style="shape=rectangle;html=1;strokeColor=#2196F3;fillColor=#E3F2FD;verticalAlign=middle;align=center;whiteSpace=wrap;fontSize=11;rounded=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="500" y="190" width="300" height="100" as="geometry" />
        </mxCell>
        <mxCell id="admin-panel" value="âš™ï¸ PANEL ADMIN&#xa;React SPA Â· Reportes Â· ConfiguraciÃ³n" style="shape=rectangle;html=1;strokeColor=#2196F3;fillColor=#E3F2FD;verticalAlign=middle;align=center;whiteSpace=wrap;fontSize=11;rounded=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="820" y="190" width="320" height="100" as="geometry" />
        </mxCell>
        <mxCell id="backend-layer" value="LÃ“GICA DE NEGOCIO" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#FF9800;fillColor=#FFF3E0;fontSize=16;fontStyle=1;verticalAlign=top;align=center;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="480" y="360" width="680" height="300" as="geometry" />
        </mxCell>
        <mxCell id="auth-service" value="ðŸ” AUTENTICACIÃ“N&#xa;JWT + RBAC Â· Refresh/expiraciÃ³n Â· VerificaciÃ³n en backend" style="shape=rectangle;html=1;strokeColor=#F44336;fillColor=#FFEBEE;verticalAlign=middle;align=center;whiteSpace=wrap;fontSize=11;rounded=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="500" y="400" width="150" height="100" as="geometry" />
        </mxCell>
        <mxCell id="core-api" value="ðŸš€ API PRINCIPAL (Express/Node.js)&lt;br&gt;â€¢ Funcionalidades clave (agendar consulta, usuarios, mascotas)&lt;br&gt;â€¢ ValidaciÃ³n de datos (DTO/Zod)&lt;br&gt;â€¢ Errores tipados Â· Idempotencia" style="shape=rectangle;html=1;strokeColor=#FF9800;fillColor=#FFF3E0;verticalAlign=middle;align=center;whiteSpace=wrap;fontSize=11;rounded=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="660" y="390" width="180" height="120" as="geometry" />
        </mxCell>
        <mxCell id="notification-service" value="ðŸ“¨ NOTIFICACIONES&lt;br&gt;Email/Push/SMS" style="shape=rectangle;html=1;strokeColor=#3F51B5;fillColor=#E8EAF6;verticalAlign=middle;align=center;whiteSpace=wrap;fontSize=11;rounded=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="840" y="400" width="150" height="100" as="geometry" />
        </mxCell>
  <mxCell id="realtime-service" value="ðŸ”„ MENSAJERÃA EN TIEMPO REAL&lt;br&gt;Socket.IO (rooms) Â· WebRTC signaling Â· MensajerÃ­a pub/sub" style="shape=rectangle;html=1;strokeColor=#607D8B;fillColor=#ECEFF1;verticalAlign=middle;align=center;whiteSpace=wrap;fontSize=11;rounded=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1010" y="400" width="130" height="100" as="geometry" />
        </mxCell>
        <mxCell id="data-layer" value="CAPA DE DATOS" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#4CAF50;fillColor=#E8F5E8;fontSize=16;fontStyle=1;verticalAlign=top;align=center;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="480" y="730" width="680" height="140" as="geometry" />
        </mxCell>
        <mxCell id="mongodb" value="ðŸƒ MONGODB&#xa;Modelo de dominio Â· Ãndices por caso de uso Â· AuditorÃ­a lÃ³gica" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;strokeColor=#4CAF50;fillColor=#E8F5E8;fontSize=11;verticalAlign=middle;align=center;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="520" y="760" width="180" height="90" as="geometry" />
        </mxCell>
        <mxCell id="file-storage" value="ðŸ“ ARCHIVOS&#xa;Signed URL (subida/descarga) Â· ValidaciÃ³n tipo/tamaÃ±o Â· RetenciÃ³n" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;strokeColor=#FF9800;fillColor=#FFF3E0;verticalAlign=middle;align=center;fontSize=11;rounded=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="730" y="760" width="170" height="92.5" as="geometry" />
        </mxCell>
        <mxCell id="cache" value="âš¡ REDIS CACHE&lt;br&gt;Rate-limit Â· Cache de lecturas Â· Estados efÃ­meros Â· TTL/Rate-limit; sesiones efÃ­meras" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;strokeColor=#F44336;fillColor=#FFEBEE;verticalAlign=middle;align=center;fontSize=11;rounded=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="930" y="760" width="190" height="95" as="geometry" />
        </mxCell>
        <mxCell id="external-layer" value="SERVICIOS EXTERNOS" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#9C27B0;fillColor=#F3E5F5;fontSize=16;fontStyle=1;verticalAlign=top;align=center;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1240" y="140" width="390" height="420" as="geometry" />
        </mxCell>
        <mxCell id="webpay-service" value="ðŸ’³ PASARELA PAGOS&lt;br&gt;Procesamiento seguro; Idempotency-Key; verificaciÃ³n de origen" style="shape=rectangle;html=1;strokeColor=#9C27B0;fillColor=#F3E5F5;verticalAlign=middle;align=center;whiteSpace=wrap;fontSize=11;rounded=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1260" y="200" width="350" height="90" as="geometry" />
        </mxCell>
        <mxCell id="analytics" value="ðŸ“Š SERVICIO ANALÃTICAS&#xa;MÃ©tricas de Uso Â· Seguimiento Eventos Â· Reportes de Negocio" style="shape=rectangle;html=1;strokeColor=#607D8B;fillColor=#ECEFF1;verticalAlign=middle;align=center;whiteSpace=wrap;fontSize=11;rounded=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1260" y="320" width="350" height="90" as="geometry" />
        </mxCell>
        <mxCell id="ai-service" value="ðŸ¤– SERVICIO IA&#xa;Detector de Razas Â· AnÃ¡lisis de ImÃ¡genes Â· Procesamiento NLP" style="shape=rectangle;html=1;strokeColor=#4CAF50;fillColor=#E8F5E8;verticalAlign=middle;align=center;whiteSpace=wrap;fontSize=11;rounded=1;strokeWidth=2;" parent="1" vertex="1">
          <mxGeometry x="1260" y="440" width="350" height="90" as="geometry" />
        </mxCell>
        <mxCell id="observability-service" value="ðŸ“Š OBSERVABILIDAD (Transversal):&lt;div&gt;&amp;nbsp;&lt;div&gt;Logs estructurados&amp;nbsp;&lt;/div&gt;&lt;div&gt;MÃ©tricas de dominio&amp;nbsp;&lt;/div&gt;&lt;div&gt;Trazas&amp;nbsp;&lt;/div&gt;&lt;div&gt;Request-ID&amp;nbsp;&lt;/div&gt;&lt;div&gt;Alertas&amp;nbsp;&lt;/div&gt;&lt;div&gt;AuditorÃ­a&lt;/div&gt;&lt;/div&gt;" style="shape=rectangle;html=1;strokeColor=#795548;fillColor=#EFEBE9;verticalAlign=middle;align=center;whiteSpace=wrap;fontSize=11;rounded=1;strokeWidth=1;opacity=80;" parent="1" vertex="1">
          <mxGeometry x="1260" y="590" width="330" height="130" as="geometry" />
        </mxCell>
        <mxCell id="arrow1" value="HTTPS" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.004;entryY=0.451;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#4CAF50;endArrow=block;endFill=1;labelBackgroundColor=#ffffff;fontSize=10;fontStyle=1;entryPerimeter=0;" parent="1" source="users-layer" target="frontend-layer" edge="1">
          <mxGeometry x="-0.0372" y="-20" relative="1" as="geometry">
            <mxPoint x="20" y="-20" as="offset" />
            <mxPoint x="450" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow2" value="HTTPS" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#2196F3;endArrow=block;endFill=1;labelBackgroundColor=#ffffff;fontSize=10;fontStyle=1;" parent="1" source="frontend-layer" target="backend-layer" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow3" value="DB queries vÃ­a Servicios" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#FF9800;endArrow=block;endFill=1;labelBackgroundColor=#ffffff;fontSize=10;fontStyle=1;" parent="1" source="backend-layer" target="data-layer" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow4" value="API calls" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=1.001;exitY=0.194;exitDx=0;exitDy=0;entryX=0;entryY=0.3;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#9C27B0;endArrow=block;endFill=1;labelBackgroundColor=#ffffff;fontSize=10;fontStyle=1;exitPerimeter=0;" parent="1" source="backend-layer" target="external-layer" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow5" value="WebSocket" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.8;exitY=0;exitDx=0;exitDy=0;entryX=0.707;entryY=1.01;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#607D8B;endArrow=block;endFill=1;startArrow=block;startFill=1;labelBackgroundColor=#ffffff;fontSize=10;fontStyle=1;dashed=1;entryPerimeter=0;" parent="1" source="realtime-service" target="web-app" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1114" y="310" />
              <mxPoint x="712" y="310" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow7" value="Webhook (firmado)" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.7;exitDx=0;exitDy=0;entryX=1;entryY=0.7;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#E91E63;endArrow=block;endFill=1;labelBackgroundColor=#ffffff;fontSize=10;fontStyle=1;dashed=1;dashPattern=5 5;" parent="1" source="external-layer" target="backend-layer" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="tech-stack" value="STACK TECNOLÃ“GICO:&lt;div&gt;&amp;nbsp;MERN (MongoDB + Express + React + Node.js)&lt;/div&gt;" style="text;html=1;strokeColor=#1976D2;fillColor=#E3F2FD;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=18;fontStyle=1;fontColor=#0D47A1;" parent="1" vertex="1">
          <mxGeometry x="35" y="360" width="335" height="160" as="geometry" />
        </mxCell>
        <mxCell id="fIFeHz_Qkzav2JECU62S-1" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image=https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/React.svg/1200px-React.svg.png;" vertex="1" parent="1">
          <mxGeometry x="600" y="220" width="22.23" height="20" as="geometry" />
        </mxCell>
        <mxCell id="fIFeHz_Qkzav2JECU62S-2" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="40" y="610" width="400" height="130" as="geometry" />
        </mxCell>
        <mxCell id="legend-container" value="LEYENDA" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#424242;fillColor=#F5F5F5;fontSize=14;fontStyle=1;verticalAlign=top;align=center;strokeWidth=1;" parent="fIFeHz_Qkzav2JECU62S-2" vertex="1">
          <mxGeometry width="390" height="130" as="geometry" />
        </mxCell>
        <mxCell id="legend-solid-text" value="â”€â”€â”€â”€â–º&amp;nbsp; &amp;nbsp;SÃ­ncrono (REST/HTTPS)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;fontSize=11;fontColor=#000000;" parent="fIFeHz_Qkzav2JECU62S-2" vertex="1">
          <mxGeometry x="20" y="30" width="180" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend-dashed-text" value="- - - - -â–º&amp;nbsp; &amp;nbsp;AsÃ­ncrono (jobs/webhook)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;fontSize=11;fontColor=#000000;" parent="fIFeHz_Qkzav2JECU62S-2" vertex="1">
          <mxGeometry x="20" y="50" width="240" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend-double-text" value="â—„â”€â”€â”€â–º WebSocket (bidireccional)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;fontSize=11;fontColor=#000000;" parent="fIFeHz_Qkzav2JECU62S-2" vertex="1">
          <mxGeometry x="20" y="70" width="180" height="15" as="geometry" />
        </mxCell>
        <mxCell id="legend-trust-text" value="Colores = LÃ­mites de confianza (Usuarios / VetGestiÃ³n / Terceros)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;fontSize=11;fontColor=#000000;" parent="fIFeHz_Qkzav2JECU62S-2" vertex="1">
          <mxGeometry x="20" y="90" width="340" height="15" as="geometry" />
        </mxCell>
        <mxCell id="fIFeHz_Qkzav2JECU62S-4" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="505" y="550" width="630" height="90" as="geometry" />
        </mxCell>
        <mxCell id="async-layer" value="PROCESAMIENTO ASÃNCRONO / JOBS" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#9C27B0;fillColor=#F3E5F5;fontSize=16;fontStyle=1;verticalAlign=top;align=center;strokeWidth=2;" parent="fIFeHz_Qkzav2JECU62S-4" vertex="1">
          <mxGeometry width="630" height="90" as="geometry" />
        </mxCell>
        <mxCell id="job-service" value="âš™ï¸ JOBS: Recordatorios Â· Notifs con reintentos Â· Reportes/analÃ­tica batch" style="shape=rectangle;html=1;strokeColor=#9C27B0;fillColor=#F3E5F5;verticalAlign=middle;align=center;whiteSpace=wrap;fontSize=11;rounded=1;strokeWidth=2;" parent="fIFeHz_Qkzav2JECU62S-4" vertex="1">
          <mxGeometry x="18.529411764705884" y="37.5" width="592.9411764705883" height="37.5" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
